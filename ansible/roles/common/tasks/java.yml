- name: 'Creating {{ home_directory }}'
  file:
    path: '{{ home_directory }}'
    state: directory

- name: 'Creating {{ java_folder }}'
  file:
    path: '{{ java_folder }}'
    state: directory

- name: 'Downloading Java 11 JDK files {{ java_download_filename }}'
  get_url:
    url: '{{ java_download_url }}'
    validate_certs: false
    dest: '{{ java_archive }}'

- name: 'Uncompressing {{ java_download_filename }} file'
  unarchive:
    src: '{{ java_archive }}'
    dest: '{{ java_usr_folder }}'
    owner: vagrant
    copy: false

- name: 'Remove downloaded( {{ java_archive }} ) file'
  file:
    path: '{{ java_archive }}'
    state: absent

- name: 'Copy Java cacerts file'
  copy:
    src: 'cacerts'
    dest: '{{ java_security_folder }}/cacerts'

- name: Set JAVA_HOME if configured.
  template:
    src: java.sh.j2
    dest: /etc/profile.d/java.sh
    mode: 0644

- name: Reloading /etc/profile for activating JDK
  shell: . /etc/profile